---
title: Ζητήματα ελέγχου ταυτότητας
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 01/25/2021
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "7748"
- "9004339"
ms.openlocfilehash: 53bd0d8f8edaead519d0282239d3a6d338b297b9
ms.sourcegitcommit: 029c4697b77ce996d41ca74c4fa86de1bb84bd99
ms.translationtype: MT
ms.contentlocale: el-GR
ms.lasthandoff: 01/25/2021
ms.locfileid: "49974490"
---
# <a name="authentication-issues"></a>Ζητήματα ελέγχου ταυτότητας

**Αναζητάτε πληροφορίες σχετικά με τους κωδικούς σφάλματος AADSTS που επιστρέφονται από την υπηρεσία διακριτικού ασφαλείας (STS) του Azure Active Directory (Azure AD);** Ανατρέξτε στο θέμα [κωδικοί σφάλματος ελέγχου ταυτότητας και εξουσιοδότησης του Azure AD](https://docs.microsoft.com/azure/active-directory/develop/reference-aadsts-error-codes) για να βρείτε περιγραφές σφαλμάτων του AADSTS, επιδιορθώσεις και ορισμένες προτεινόμενες λύσεις.

Τα σφάλματα εξουσιοδότησης μπορεί να είναι αποτέλεσμα πολλών διαφορετικών ζητημάτων, τα περισσότερα από τα οποία δημιουργούν ένα σφάλμα του 401 ή του 403. Για παράδειγμα, τα παρακάτω προβλήματα μπορούν να οδηγήσουν σε σφάλματα εξουσιοδότησης:

- Εσφαλμένες [ροές εξαγοράς διακριτικού πρόσβασης](https://docs.microsoft.com/azure/active-directory/develop/authentication-vs-authorization) 
- Ανεπαρκής ρύθμιση [εύρους δικαιωμάτων](https://docs.microsoft.com/azure/active-directory/develop/v2-permissions-and-consent) 
- Έλλειψη [συναίνεσης](https://docs.microsoft.com/azure/active-directory/develop/howto-convert-app-to-be-multi-tenant#understanding-user-and-admin-consent)

Για να επιλύσετε συνηθισμένα σφάλματα εξουσιοδότησης, δοκιμάστε τα βήματα που παρέχονται παρακάτω, τα οποία ταιριάζουν περισσότερο με το σφάλμα που λαμβάνετε. Ενδέχεται να ισχύουν περισσότερα από ένα βήματα για ένα σφάλμα που λαμβάνετε.

- **401 μη εξουσιοδοτημένο σφάλμα: είναι έγκυρο το διακριτικό σας;**

Βεβαιωθείτε ότι η εφαρμογή σας παρουσιάζει ένα έγκυρο διακριτικό πρόσβασης στο Microsoft Graph ως μέρος της αίτησης. Αυτό το σφάλμα σημαίνει συχνά ότι το διακριτικό πρόσβασης ενδέχεται να λείπει από την κεφαλίδα αίτησης ελέγχου ταυτότητας HTTP ή ότι το διακριτικό δεν είναι έγκυρο ή έχει λήξει. Συνιστούμε ανεπιφύλακτα να χρησιμοποιήσετε τη βιβλιοθήκη ελέγχου ταυτότητας της Microsoft (MSAL) για την απόκτηση του διακριτικού πρόσβασης. Επιπλέον, αυτό το σφάλμα μπορεί να προκύψει εάν προσπαθήσετε να χρησιμοποιήσετε ένα διακριτικό πρόσβασης με πληρεξούσιο που εκχωρείται σε έναν προσωπικό λογαριασμό Microsoft για να αποκτήσετε πρόσβαση σε ένα API που υποστηρίζει μόνο επαγγελματικούς ή σχολικούς λογαριασμούς (εταιρικούς λογαριασμούς).

**403 απαγορευμένο σφάλμα: έχετε επιλέξει το σωστό πρόγραμμα δικαιωμάτων;**

Βεβαιωθείτε ότι έχετε ζητήσει το σωστό τμήμα δικαιωμάτων με βάση τα API του Microsoft Graph για τις κλήσεις της εφαρμογής σας. Τα συνιστώμενα δικαιώματα ελάχιστου προνομίου παρέχονται σε όλα τα θέματα της μεθόδου αναφοράς του Microsoft Graph API. Επιπλέον, αυτά τα δικαιώματα πρέπει να εκχωρούνται στην εφαρμογή από ένα χρήστη ή διαχειριστή. Η εκχώρηση δικαιωμάτων συμβαίνει συνήθως μέσω μιας σελίδας συναίνεσης ή της χρήσης της λεπίδας δήλωσης εφαρμογής Azure πύλης. Από τη λεπίδα **ρυθμίσεων** για την εφαρμογή, κάντε κλικ στην επιλογή **απαιτούμενα δικαιώματα** και, στη συνέχεια, κάντε κλικ στην επιλογή **εκχώρηση δικαιωμάτων**. Για περισσότερες πληροφορίες, ανατρέξτε στα θέματα:

- [Δικαιώματα του Microsoft Graph](https://docs.microsoft.com/graph/permissions-reference) 
- [Κατανόηση των δικαιωμάτων και της συγκατάθεσης του Azure AD](https://docs.microsoft.com/azure/active-directory/develop/v2-permissions-and-consent)

**403 απαγορευμένο σφάλμα: η εφαρμογή σας απέκτησε ένα διακριτικό για να ταιριάζει με τα επιλεγμένα δικαιώματα;**

Βεβαιωθείτε ότι οι τύποι των δικαιωμάτων που ζητούνται ή εκχωρούνται συμφωνούν με τον τύπο του διακριτικού πρόσβασης που αποκτά η εφαρμογή σας. Μπορεί να ζητάτε και να εκχωρείτε δικαιώματα εφαρμογής, αλλά να χρησιμοποιείτε διαδραστικούς διαδραστικούς κώδικες ροής κώδικα αντί για διακριτικά ροής διαπιστευτηρίων του προγράμματος-πελάτη, ή να ζητάτε και να εκχωρείτε δικαιώματα που έχουν ανατεθεί, αλλά να χρησιμοποιείτε διακριτικά ροής διαπιστευτηρίων του προγράμματος-πελάτη αντί για διακριτικά ροής κώδικα με ανάθεση

Για περισσότερες πληροφορίες σχετικά με τα κουπόνια απόκτησης, ανατρέξτε στα θέματα:

- [Αποκτήστε πρόσβαση εκ μέρους των χρηστών και των δικαιωμάτων που έχουν ανατεθεί](https://docs.microsoft.com/graph/auth-v2-user) 
- [Ροή κωδικού εξουσιοδότησης του Azure AD v 2.0-OAuth 2,0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) 
- [Αποκτήστε πρόσβαση χωρίς χρήστη (υπηρεσία δαίμονα) και δικαιώματα εφαρμογής](https://docs.microsoft.com/graph/auth-v2-service) 
- [Ροή διαπιστευτηρίων προγράμματος-πελάτη του Azure AD v 2.0-OAuth 2,0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow)

**403 απαγορευμένο σφάλμα: Επαναφορά κωδικού πρόσβασης**

Προς το παρόν, δεν υπάρχουν δικαιώματα υπηρεσίας-προς-υπηρεσία του δαίμονα δικαιωμάτων εφαρμογής που επιτρέπουν την επαναφορά κωδικών πρόσβασης χρηστών. Αυτά τα API υποστηρίζονται μόνο με τη χρήση των ροών διαδραστικών εκχωρημένων κωδικών με έναν διαχειριστή που έχει συνδεθεί. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [δικαιώματα του Microsoft Graph](https://docs.microsoft.com/graph/permissions-reference).

**το 403 δεν επιτρέπεται: έχει πρόσβαση ο χρήστης και έχει άδεια χρήσης;**

Για τις ροές κωδικών που έχουν ανατεθεί, το Microsoft Graph αξιολογεί εάν η αίτηση έχει επιτραπεί με βάση τα δικαιώματα που έχουν εκχωρηθεί στην εφαρμογή και τα δικαιώματα που έχει ο χρήστης που έχει συνδεθεί. Γενικά, αυτό το σφάλμα υποδηλώνει ότι ο χρήστης δεν έχει το προνόμιο να εκτελεί την αίτηση **ή** ότι ο χρήστης δεν έχει άδεια χρήσης για την πρόσβαση στα δεδομένα. Μόνο οι χρήστες με τα απαιτούμενα δικαιώματα ή άδειες χρήσης μπορούν να κάνουν την αίτηση με επιτυχία.

**το 403 δεν επιτρέπεται: επιλέξατε το σωστό API πόρων;**

Οι υπηρεσίες API, όπως το Microsoft Graph, ελέγχουν ότι η αξίωση του *AUD* (ακροατήριο) στο διακριτικό πρόσβασης που λαμβάνεται ταιριάζει με την τιμή που αναμένει για τον εαυτό της και, εάν όχι, παρουσιάζεται ένα απαγορευμένο Σφάλμα 403. Ένα συνηθισμένο λάθος που οδηγεί σε αυτό το σφάλμα είναι να προσπαθήσετε να χρησιμοποιήσετε ένα διακριτικό που αποκτήθηκε για τα API του Azure AD Graph, τα API του Outlook ή τα API του SharePoint/OneDrive για να καλείτε το Microsoft Graph (ή το αντίστροφο). Βεβαιωθείτε ότι ο πόρος (ή το εύρος) που αποκτά η εφαρμογή σας ένα διακριτικό για να ταιριάζει με το API που καλεί η εφαρμογή.

**400 Ακατάλληλη αίτηση ή 403 δεν επιτρέπεται: ο χρήστης συμμορφώνεται με τις πολιτικές της Access υπό όρους της εταιρείας (CA);**

Με βάση τις πολιτικές της πρόσβασης υπό όρους της εταιρείας (CA), ένας χρήστης που αποκτά πρόσβαση σε πόρους του Microsoft Graph μέσω της εφαρμογής σας μπορεί να αμφισβητηθεί για πρόσθετες πληροφορίες που δεν υπάρχουν στο διακριτικό πρόσβασης που αποκτήθηκε αρχικά από την εφαρμογή σας. Σε αυτή την περίπτωση, η εφαρμογή σας λαμβάνει ένα **400 με ένα σφάλμα *interaction_required*** κατά την απόκτηση διακριτικού πρόσβασης ή ένα **403 με *Insufficient_claims*** σφάλμα κατά την κλήση του Microsoft Graph. Και στις δύο περιπτώσεις, η απόκριση σφάλματος περιέχει πρόσθετες πληροφορίες που μπορούν να παρουσιαστούν στο εγκεκριμένο τελικό σημείο για να αμφισβητήσουν το χρήστη για πρόσθετες πληροφορίες (όπως έλεγχος ταυτότητας πολλών παραγόντων ή εγγραφή συσκευής).

Για περισσότερες πληροφορίες σχετικά με την πρόσβαση υπό όρους, ανατρέξτε στα θέματα:

- [Χειρισμός των προκλήσεων υπό όρους πρόσβασης με χρήση του MSAL](https://docs.microsoft.com/azure/active-directory/develop/msal-error-handling-dotnet#conditional-access-and-claims-challenges) 
- [Οδηγίες για προγραμματιστές για πρόσβαση υπό όρους της υπηρεσίας καταλόγου Active Directory Azure](https://docs.microsoft.com/azure/active-directory/develop/v2-conditional-access-dev-guide)

**_Λήξη υποστήριξης για τη βιβλιοθήκη ελέγχου ταυτότητας του Azure Active Directory (ADAL) και το API του Azure AD Graph (AAD Graph)_* _

- Ξεκινώντας στις 30 Ιουνίου, 2020, δεν θα προσθέτουμε πλέον νέες δυνατότητες στη βιβλιοθήκη ελέγχου ταυτότητας του Azure Active Directory (ADAL) και στο Azure AD Graph API (AAD Graph). Θα συνεχίσουμε να παρέχουμε τεχνική υποστήριξη και ενημερώσεις ασφάλειας, αλλά δεν θα παρέχουμε πλέον ενημερώσεις δυνατοτήτων.
- Ξεκινώντας στις 30 Ιουνίου 2022, θα τερματίσουμε την υποστήριξη για το ADAL και το AAD Graph και δεν θα παρέχουμε πλέον τεχνική υποστήριξη ή ενημερώσεις ασφαλείας.
    - Οι εφαρμογές που χρησιμοποιούν το ADAL σε υπάρχουσες εκδόσεις λειτουργικού συστήματος θα συνεχίσουν να λειτουργούν μετά από αυτό το χρονικό διάστημα, αλλά δεν θα έχουν οποιαδήποτε τεχνική υποστήριξη ή ενημερώσεις ασφαλείας.
    - Οι εφαρμογές που χρησιμοποιούν το AAD Graph μετά από αυτό το διάστημα ενδέχεται να μην λαμβάνουν πλέον απαντήσεις από το τελικό σημείο του AAD Graph.

_ *ADAL μετεγκατάστασης**

Συνιστούμε να κάνετε ενημέρωση στη [βιβλιοθήκη ελέγχου ταυτότητας της Microsoft (MSAL)](https://docs.microsoft.com/azure/active-directory/develop/v2-overview), η οποία έχει τις πιο πρόσφατες δυνατότητες και ενημερώσεις ασφαλείας. Αυτή η σύσταση βρίσκεται στο περιβάλλον της Microsoft για τη μετεγκατάσταση των εφαρμογών της στο MSAL μέχρι την λήξη της προθεσμίας υποστήριξης. Ο στόχος της μετεγκατάστασης των εφαρμογών της Microsoft στο MSAL είναι να εξασφαλίσετε ότι οι εφαρμογές επωφελούνται από τη συνεχιζόμενη βελτίωση της ασφάλειας και των δυνατοτήτων του MSAL.

- [Διαβάστε τις συνήθεις ερωτήσεις για το ADAL](https://docs.microsoft.com/azure/active-directory/develop/msal-migration#frequently-asked-questions-faq) 
- [Μάθετε πώς μπορείτε να μετεγκαταστήσετε εφαρμογές σε βάση ανά πλατφόρμα](https://docs.microsoft.com/azure/active-directory/develop/msal-migration#frequently-asked-questions-faq) 
- Εάν χρειάζεστε βοήθεια για να κατανοήσετε ποιες από τις εφαρμογές σας χρησιμοποιούν το ADAL, συνιστάται να εξετάσετε όλο τον πηγαίο κώδικα των εφαρμογών σας και, εάν υπάρχει, να επικοινωνήσετε με οποιουσδήποτε ανεξάρτητους προμηθευτές λογισμικού (ISV) ή υπηρεσίες παροχής εφαρμογών. Η υποστήριξη της Microsoft μπορεί επίσης να σας παρέχει μια λίστα με όλες τις εφαρμογές που δεν ανήκουν στη Microsoft ADAL στον μισθωτή σας.

**Μετεγκατάσταση γραφήματος AAD**

Για εφαρμογές που χρησιμοποιούν το AAD Graph, ακολουθήστε τις οδηγίες για τη [μετεγκατάσταση εφαρμογών Azure AD Graph στο Microsoft Graph](https://docs.microsoft.com/graph/migrate-azure-ad-graph-planning-checklist?view=graph-rest-1.0&preserve-view=true).

- [Ο πίνακας ελέγχου μετεγκατάστασης παρέχει ένα χρονικό ξεκίνημα](https://docs.microsoft.com/graph/migrate-azure-ad-graph-planning-checklist). 
- Η πύλη δήλωσης της εφαρμογής Azure εμφανίζει ποιες εφαρμογές χρησιμοποιούν το AAD Graph. Σας συνιστούμε να εξετάσετε όλο τον πηγαίο κώδικα των εφαρμογών σας και, εάν υπάρχει, να επικοινωνήσετε με οποιαδήποτε ISV ή υπηρεσίες παροχής εφαρμογών. Η υποστήριξη της Microsoft μπορεί επίσης να σας παρέχει τις πληροφορίες για όλη τη χρήση του AAD Graph στον μισθωτή σας.

 










